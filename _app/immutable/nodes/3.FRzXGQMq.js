import{a as I,t as F,c as W}from"../chunks/disclose-version.DSYjmPSD.js";import{h as A,j as V,ab as le,f as ie,b as oe,v as ue,a9 as ae,H as ce,i as X,k as P,l as H,c as te,d as re,p as ve,ac as B,x as z,ad as fe,ae as de,af as pe,Y as he,A as G,ag as _e,ah as ge,a8 as me,ai as ye,aj as xe,a1 as ke,a5 as we,a3 as De,O as Ee,I as Te,R as be,Q as Y,a as Ae,T as k,W as M,V as m,ak as J,s as Ce,g as N}from"../chunks/runtime.D0CDJ9Th.js";import{s as $}from"../chunks/render.BnjjuXMq.js";import{i as Ie}from"../chunks/if.Bo8p0Wc3.js";import{d as Re}from"../chunks/events.Bjkzvih3.js";import{t as He}from"../chunks/class.Bvena8yX.js";import{p as Me}from"../chunks/proxy.WYylddmY.js";import{C as Ne}from"../chunks/Card.DQrp_CDh.js";import{e as K,f as Z,q as Se,w as Q,T as j,g as Ye,h as $e,i as Fe}from"../chunks/firebase.C4EL6l9v.js";import{u as R}from"../chunks/user.svelte.DDiP6m0B.js";let U=null;function Le(i,e){return e}function qe(i,e,t,v){for(var d=[],f=e.length,c=0;c<f;c++)ge(e[c].e,d,!0);var p=f>0&&d.length===0&&t!==null;if(p){var g=t.parentNode;me(g),g.append(t),v.clear(),D(i,e[0].prev,e[f-1].next)}ye(d,()=>{for(var a=0;a<f;a++){var s=e[a];p||(v.delete(s.k),D(i,s.prev,s.next)),xe(s.e,!p)}})}function Oe(i,e,t,v,d,f=null){var c=i,p={flags:e,items:new Map,first:null};{var g=i;c=A?V(ke(g)):g.appendChild(le())}A&&ie();var a=null,s=!1;oe(()=>{var r=t(),o=ue(r)?r:r==null?[]:ae(r),l=o.length;if(s&&l===0)return;s=l===0;let n=!1;if(A){var y=c.data===ce;y!==(l===0)&&(c=X(),V(c),P(!1),n=!0)}if(A){for(var u=null,h,x=0;x<l;x++){if(H.nodeType===8&&H.data===we){c=H,n=!0,P(!1);break}var w=o[x],_=v(w,x);h=se(H,p,u,null,w,_,x,d,e),p.items.set(_,h),u=h}l>0&&V(X())}A||Ve(o,p,c,d,e,v),f!==null&&(l===0?a?te(a):a=re(()=>f(c)):a!==null&&ve(a,()=>{a=null})),n&&P(!0)}),A&&(c=H)}function Ve(i,e,t,v,d,f){var c=i.length,p=e.items,g=e.first,a=g,s,r=null,o=[],l=[],n,y,u,h;for(h=0;h<c;h+=1){if(n=i[h],y=f(n,h),u=p.get(y),u===void 0){var x=a?a.e.nodes_start:t;r=se(x,e,r,r===null?e.first:r.next,n,y,h,v,d),p.set(y,r),o=[],l=[],a=r.next;continue}if(Pe(u,n,h),u.e.f&B&&te(u.e),u!==a){if(s!==void 0&&s.has(u)){if(o.length<l.length){var w=l[0],_;r=w.prev;var E=o[0],T=o[o.length-1];for(_=0;_<o.length;_+=1)ee(o[_],w,t);for(_=0;_<l.length;_+=1)s.delete(l[_]);D(e,E.prev,T.next),D(e,r,E),D(e,T,w),a=w,r=T,h-=1,o=[],l=[]}else s.delete(u),ee(u,a,t),D(e,u.prev,u.next),D(e,u,r===null?e.first:r.next),D(e,r,u),r=u;continue}for(o=[],l=[];a!==null&&a.k!==y;)a.e.f&B||(s??(s=new Set)).add(a),l.push(a),a=a.next;if(a===null)continue;u=a}o.push(u),r=u,a=u.next}if(a!==null||s!==void 0){for(var b=s===void 0?[]:ae(s);a!==null;)a.e.f&B||b.push(a),a=a.next;var C=b.length;if(C>0){var L=c===0?t:null;qe(e,b,L,p)}}z.first=e.first&&e.first.e,z.last=r&&r.e}function Pe(i,e,t,v){fe(i.v,e),i.i=t}function se(i,e,t,v,d,f,c,p,g){var a=U;try{var s=(g&de)!==0,r=(g&pe)===0,o=s?r?he(d):G(d):d,l=g&_e?G(c):c,n={i:l,v:o,k:f,a:null,e:null,prev:t,next:v};return U=n,n.e=re(()=>p(i,o,l),A),n.e.prev=t&&t.e,n.e.next=v&&v.e,t===null?e.first=n:(t.next=n,t.e.next=n.e),v!==null&&(v.prev=n,v.e.prev=n.e),n}finally{U=a}}function ee(i,e,t){for(var v=i.next?i.next.e.nodes_start:t,d=e?e.e.nodes_start:t,f=i.e.nodes_start;f!==v;){var c=De(f);d.before(f),f=c}}function D(i,e,t){e===null?i.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}var Be=F('<p class="header-text svelte-1c02u09">tracking.exe</p>'),Qe=(i,e,t)=>e(N(t)),Ue=F('<div class="beverage-counter svelte-1c02u09"><span class="beverage-count svelte-1c02u09"><!></span> <button class="svelte-1c02u09"> </button></div>'),We=F('<div class="wrapper svelte-1c02u09"><h1 class="svelte-1c02u09">Hello, <span><span class="red-highlight svelte-1c02u09"> </span>.</span></h1> <div class="hr svelte-1c02u09"></div> <h2 class="svelte-1c02u09">Your <span class="red-highlight svelte-1c02u09">Sip Stats</span> for <span class="red-highlight svelte-1c02u09"> </span>:</h2> <section class="beverage-container svelte-1c02u09"></section></div>'),Xe=F('<main class="svelte-1c02u09"><!></main>');function sa(i,e){Ee(e,!0);let t=Ce(!1),v=Me([{type:"water",count:0},{type:"juice",count:0},{type:"pop",count:0}]);Te(()=>{R.value&&Promise.all(v.map(d)).then(()=>{Ae(t,!0)})});async function d(a){var n;if(!((n=R.value)!=null&&n.uid))return;const s=K(Z,"tracking",R.value.uid,"drinks"),r=new Date,o=Se(s,Q("timestamp",">=",j.fromDate(new Date(r.getFullYear(),r.getMonth(),r.getDate()))),Q("timestamp","<",j.fromDate(new Date(r.getFullYear(),r.getMonth(),r.getDate()+1))),Q("type","==",a.type)),l=await Ye(o);a.count=l.data().count}async function f(a){var r;if(!((r=R.value)!=null&&r.uid))return;a.count+=1;const s=K(Z,"tracking",R.value.uid,"drinks");await $e(s,{type:a.type,timestamp:Fe()}),await d(a)}const c={weekday:"long",year:"numeric",month:"short",day:"numeric"};var p=Xe(),g=k(p);Ne(g,{header:s=>{var r=Be();I(s,r)},children:(s,r)=>{var o=We(),l=k(o),n=M(k(l)),y=k(n),u=k(y,!0);m(y),J(),m(n),m(l);var h=M(l,4),x=M(k(h),3),w=k(x,!0);Y(()=>$(w,new Date().toLocaleDateString("en-us",c))),m(x),J(),m(h);var _=M(h,2);Oe(_,21,()=>v,Le,(E,T)=>{var b=Ue(),C=k(b),L=k(C);Ie(L,()=>N(t),O=>{var S=W();Y(()=>$(S,N(T).count)),I(O,S)},O=>{var S=W("Â·");I(O,S)}),m(C);var q=M(C,2);q.__click=[Qe,f,T];var ne=k(q);m(q),m(b),Y(()=>{He(C,"red-highlight",!N(t)),$(ne,`Add ${N(T).type??""}`)}),I(E,b)}),m(_),m(o),Y(()=>{var E;return $(u,(E=R.value)==null?void 0:E.displayName)}),I(s,o)},$$slots:{header:!0,default:!0}}),m(p),I(i,p),be()}Re(["click"]);export{sa as component};
